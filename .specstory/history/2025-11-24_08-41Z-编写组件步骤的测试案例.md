<!-- Generated by SpecStory, Markdown v2.1.0 -->

<!-- vscode Session 57649c06-1fc6-4549-b3f0-ff940d610ad4 (2025-11-24 08:41Z) -->

# 编写组件步骤的测试案例 (2025-11-24 08:41Z)

_**User (2025-11-24 08:55Z)**_

现在你已经知道了我们的组件的使用,那么你可以看看 #packages/components/combobox 和 #packages/components/color-picker 帮我给 #packages/components/steps 编写一下全量的测试案例吗

---

_**Agent (model copilot/gpt-5.1-codex)**_

**Planning test case development****Gathering repository structure****Checking test locations in components****Inspecting test directory****Deciding how to read file content****Adding color-picker tests****Reviewing test files****Preparing to test steps component****Investigating front-end hooking examples****Checking examples directory structure****Checking test render source****Investigating test hooking setup****Locating state machine file****Preparing to explore testing utilities****Searching for testHook definition****Checking for shared test directory****Checking if index read is necessary****Checking hooking functions in class.ts****Reviewing hook functions in hooks.ts****Investigating test selectors for Steps****Checking type definitions in props.ts****Planning tests for steps component****Examining steps controls in shared file****Analyzing test data and hooks****Searching for stepsData definition****Investigating control test IDs****Checking directory for filenames****Searching for Controls component****Reading Controls.ts****Updating test progress and planning interactions****Investigating testHook and data-testid usage****Inspecting types definition****Planning comprehensive steps tests**

I’m mapping out a detailed test plan for the steps component, focusing on interactions like button navigation, linear versus non-linear behavior, step completion display, and accessibility attributes. I’m checking examples and code to ensure the tests can hook into the DOM properly and cover all essential features.**Analyzing testHook getTrigger usage****Searching for data-testid attributes****Investigating test ID usage in steps example****Examining vitest.browser.setup.ts****Planning comprehensive Step component tests****Planning test implementation with vitest****Searching for dataAttr export****Investigating `dataAttr` usage and planning step component tests**

I'm tracking down where `dataAttr` is defined, focusing on the `packages/dom/src` folder and exports like `index.ts`. Meanwhile, I'm outlining detailed test cases for a multi-step UI component that relies on data attributes for state and navigation behavior, including helpers to access elements by custom data attributes and interactions with navigation buttons, orientation toggles, and progress indicators. I'm also clarifying how the test framework's locator helpers work to ensure the tests can interact with DOM elements as expected.**Checking attribute expectations in tests****Designing comprehensive step component tests**

This is a detailed plan to create robust browser tests for a steps component, using test hooks to access step elements and controls. I’m outlining helpers, verifying element attributes like visibility and navigation states, and defining multiple scenarios like initial render, linear mode enforcement, and orientation changes. I’m also considering importing shared step data for dynamic test counts and ensuring proper file structure before creating the test file. It’s a lot to cover, but I’m setting up a solid foundation for stable, clear component tests!**Verifying export of stepsData****Outlining detailed test plans****Creating new file****Replacing top-level arrow functions with declarations**
```

```
**Correcting test count assertions**
```

```
**Evaluating test strategies and validations****Evaluating test execution considerations**

I’m weighing whether to run the E2E browser tests in `packages/components/steps/test/steps.spec.ts` given their dependency on browser environment setups like `vitest/browser` and potential config complexities. Since tests aren’t explicitly requested, I’ll note they’re not run but mention how to execute them and summarize their coverage for the user’s awareness.- Added comprehensive browser specs in `steps.spec.ts` covering initial rendering, non-linear vs linear navigation, next/prev progression through completion, orientation control updates, plus indicator and separator state changes tied to progress.
- Helpers mirror the combobox/color-picker patterns so tests exercise the vanilla example via `vitest/browser`, `testHook`, and the shared controls panel for realistic interactions.

Tests not run (not requested). Consider running `pnpm vitest `steps.spec.ts` --browser` to verify the suite in your environment.

---

