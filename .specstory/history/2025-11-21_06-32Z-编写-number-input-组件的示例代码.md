<!-- Generated by SpecStory, Markdown v2.1.0 -->

<!-- vscode Session dc969201-2f2a-4730-ae11-375dab1390ef (2025-11-21 06:32Z) -->

# 编写 number-input 组件的示例代码 (2025-11-21 06:32Z)

_**User (2025-11-21 06:49Z)**_

我想你根据 #packages/components/combobox 和 #packages/components/color-picker 的 lit 和 vanilla 的 example 来帮我编写一下 #packages/components/number-input 的 examples 中的 lit 和 vanilla 的例子.你可以看看 #packages/components/otp-input 中的 [react](packages/components/otp-input/examples/react/OtpInput.react.tsx) 和 [solid](packages/components/otp-input/examples/solid/OtpInput.solid.tsx), [vue](packages/components/otp-input/examples/vue/OtpInput.vue), [svelte](packages/components/otp-input/examples/svelte/OtpInput.svelte) ,同时别忘了在 storybook 中注册哦

---

_**Agent (model copilot/gpt-5.1-codex)**_

**Preparing todo list plan****Preparing workspace and inspecting directories****Reviewing combobox example files****Listing directory contents****Considering file reading approach****Searching for vanilla combobox example****Locating color-picker examples****Seeking vanilla color picker example****Checking for number-input examples****Listing example needs****Checking for existing vanilla code****Reviewing example consistency across components****Analyzing user's request for number-input examples****Verifying storybook registration****Questioning term meaning****Analyzing example enhancement requests****Checking if index is a directory****Checking for index.ts setup****Investigating machine features and API connections****Analyzing example requirements and component structure****Checking for basic Astro file****Checking number-input examples in React****Analyzing example enhancement request****Searching for numberInputControls source****Refining parameter names****Inspecting shared controls file****Reviewing NumberInput and OTP Input examples****Checking for OTP component stories****Analyzing OTP references for number-input examples****Analyzing new example requirements****Planning NumberInput UI enhancements****Investigating storybook registration****Planning enhanced number-input examples**

I’m outlining a plan to update the Lit and vanilla examples with advanced features like value display, action buttons for setting values, min/max, clearing, a scrubber overlay, and focus input. I’m considering how to integrate `api.getValueTextProps` for attribute spreading while managing text updates differently for Lit and vanilla. I’ll also check the anatomy file to align CSS classes and data attributes across both implementations.**Designing number input structure and style****Reviewing storybook registration for components****Verifying storybook integration****Planning detailed LitElement implementation**

I'm outlining a thorough design for the LitElement number input example, focusing on integrating controls, state machine, rendering, and formatting. I'll carefully align the machine context defaults with those from controls, preserve necessary data attributes for testing, and add quick action buttons with formatting consistent with the machine state. This preparation will help me apply a clean patch for the example.**Searching for ControlsController location****Reviewing default context handling****Configuring number input formatting****Planning vanilla component updates****Integrating event listeners and formatting****Detailing render updates and styling integration**

I'll set up the render method to update the value text and quick buttons with locale-aware formatting, ensure event listeners use a safely initialized API reference, and add comprehensive ASCII-based CSS styles targeting data-scope and classes for consistent layout and appearance across lit and vanilla implementations.
```

```
**Preparing typed number input updates**

I'm making sure the number input's format options use the correct `Intl.NumberFormatOptions` type and ensuring locale defaults correctly. I’ll also add quick value buttons with well-typed properties and update the rendering and event logic. Next, I'll carefully patch the example in `packages/components/number-input/examples/vanilla/NumberInput.ts` by introducing the quickValues constant, extending class fields, and refining the HTML markup.
```

```
**Adjusting TypeScript element typing**
```

```
**Enhancing type safety and styling consistency**

I'm making sure DOM element queries use generics to avoid TypeScript type errors since `querySelector` returns `Element | null` which isn't assignable to `HTMLElement | null`. I'll also update the label text to match the UI and ensure the quick value buttons show formatted text promptly. Next, I'm crafting detailed CSS for various parts of the number input component, targeting data attributes and classes to keep styles consistent across different frameworks, with attention to layout, colors, and interaction states.
```

```
**Reviewing button and label styles**
```

```
**Verifying UI component updates and state handling****Updating task status****Verifying stateListeners and storybook registration****Considering git status check****Summarizing changes and next steps**

I’m gathering a concise summary of the updates made across several files involving quick preset buttons, formatting improvements, and UI details in both lit and vanilla examples. I’ll cover how storybook is already wired for these changes, note that tests weren’t run, and suggest next steps like aligning React/Solid examples and running storybook or docs for verification. I want to mention CSS tweaks, the unchanged specstory file, and how controls connect with the new presets, wrapping everything in a clear bullet list for the final response.**Updates**
- Rebuilt `NumberInput.ts` into a richer demo: keeps the existing controls/state tooling, but now renders a budget-style panel with value text, helper copy, scrubber hint, styled triggers, and quick-preset/min/max/clear/focus actions that use the machine’s API (labels auto-format with the current locale/options).
- Reworked `NumberInput.ts` to mirror the Lit UI, including new element refs, action wiring, preset formatting logic that reacts to control changes, and updated markup in `NumberInput.render` so the vanilla example showcases the same interactions.
- Expanded `style.css` with component-scoped styling for the new layout (panel shell, scrubber, control group, value text, and action clusters). The existing Storybook entries already import these Astro wrappers, so no extra registration changes were required.

**Verification**
- Not run (not requested)

Next step: open Storybook/Playground to visually confirm the new layout and ensure the Controls panel updates the preset labels as expected.

---

