<!-- Generated by SpecStory, Markdown v2.1.0 -->

<!-- vscode Session e0fae9ad-fc2d-46eb-800e-87896e4b1d96 (2025-11-26 05:51Z) -->

# 解决 TypeScript 类型错误的方法 (2025-11-26 05:51Z)

_**User (2025-11-26 05:51Z)**_

@workspace /fix 对象字面量只能指定已知属性，并且“onChange”不在类型“{ 'data-selected'?: any; 'data-expanded'?: any; 'data-highlighted'?: any; 'data-readonly'?: any; 'data-indeterminate'?: any; 'data-invalid'?: any; 'data-hover'?: any; 'data-active'?: any; 'data-focus'?: any; 'data-focus-visible'?: any; ... 24 more ...; 'data-index'?: number | undefined; } & { ...; } & LabelHTMLAttri...”中。

---

_**Agent (model copilot/gpt-5.1-codex)**_

**Resolving TypeScript test errors**计划：
1. 找到 `normalizeProps.label` 测试中传入 `onChange` 触发的类型错误。
2. 通过将对象字面量断言为 `any`，绕过 `LabelHTMLAttributes` 的属性限制。
3. 保持原有断言，确保行为测试不变。

````ts
// ...existing code...
  it('maps DOM props to lower-case or explicit aliases', () => {
    const normalized = normalizeProps.label({
      onChange: () => {},
      htmlFor: 'input-id',
    } as any)

    expect(typeof normalized.oninput).toBe('function')
    expect(normalized.for).toBe('input-id')
  })
// ...existing code...
````

---

_**User (2025-11-26 05:52Z)**_

帮我修复一下

---

_**Agent (model copilot/gpt-5.1-codex)**_

<tool-use data-tool-type="write" data-tool-name="copilot_applyPatch">
<details>
<summary>Tool use: **copilot_applyPatch** • 正在使用 "应用修补程序"</summary>

```typescript
import { describe, expect, it } from 'vitest'
import { normalizeProps } from '../src/normalize-props'

describe('normalizeProps', () => {
  it('preserves defaultValue props for uncontrolled inputs', () => {
    const normalized = normalizeProps.input({ defaultValue: 'hello', type: 'text' })

    expect(normalized.defaultValue).toBe('hello')
    expect(normalized.value).toBeUndefined()
  })

  it('preserves defaultChecked props for uncontrolled inputs', () => {
    const normalized = normalizeProps.input({ defaultChecked: true, type: 'checkbox' })

    expect(normalized.defaultChecked).toBe(true)
    expect(normalized.checked).toBeUndefined()
  })

  it('normalizes readOnly without stringifying', () => {
    const normalized = normalizeProps.input({ readOnly: false })

    expect(normalized.readonly).toBe(false)
  })

  it('stringifies style objects using kebab-case keys', () => {
    const normalized = normalizeProps.button({ style: { 'backgroundColor': 'black', '--gap': '2px' } })

    expect(normalized.style).toBe('background-color:black;--gap:2px;')
  })

  it('maps DOM props to lower-case or explicit aliases', () => {
    const normalized = normalizeProps.label({
      onChange: () => {},
      htmlFor: 'input-id',
    } as any)

    expect(typeof normalized.oninput).toBe('function')
    expect(normalized.for).toBe('input-id')
  })
})

```


</details>
</tool-use>

---

**Fixing TypeScript type error****Preparing final response**Patched `normalize-props.test.ts` so the literal passed to `normalizeProps.label` is cast to `any`, avoiding the `onChange` type error while keeping the behavioral assertions intact. No other files touched.

---

