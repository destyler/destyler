<!-- Generated by SpecStory -->

# 帮我将这些 svelte 和 solid 还有 react 的组件使用 vue 的 sfc 进行同步 (2025-07-30 12:33Z)

_**User**_

帮我将这些 svelte 和 solid 还有 react 的组件使用 vue 的 sfc 进行同步

---

_**Assistant**_

为实现组件同步到 Vue SFC，需要将 React、Solid、Svelte 的 OTP 输入组件的结构、样式和交互逻辑迁移到 Vue 单文件组件（SFC）中。主要步骤如下：

1. 分析各组件的结构和交互，统一到 Vue SFC。
2. 保留样式和布局，迁移到 Vue 的模板和 class。
3. 将交互逻辑（如 clearValue、focus）用 Vue 的事件和响应式 API 实现。
4. 保持控件和状态可视化工具栏的集成。

下面是具体修改建议：

---

### [otp-input.vue](file:///Users/elonehoo/Developer/destyler-package/destyler/examples/vue/src/pages/otp-input.vue)

**修改摘要**  
- 统一样式和布局，参考 React/Solid/Svelte 版本。
- 保留 OTP 输入框、标题、说明、清除按钮。
- 保持控件和状态可视化工具栏。
- 保证输入框数量为 3，样式一致。
- 增加 dark/light 模式样式。
- 保持 clearValue、focus 功能。

````vue
<script setup lang="ts">
import * as otpInput from '@destyler/otp-input'
import { pinInputControls } from '@destyler/shared-private'
import { Controls, StateVisualizer, Toolbar, useControls } from '@destyler/shared-private/vue'
import { normalizeProps, useMachine } from '@destyler/vue'
import { computed, useId } from 'vue'
import '@destyler/shared-private/styles/otp-input.css'

const controls = useControls(pinInputControls)

const [state, send] = useMachine(otpInput.machine({ id: useId() }), {
  context: controls.context,
})
const api = computed(() => otpInput.connect(state.value, send, normalizeProps))
</script>

<template>
  <div class="flex flex-col p-4">
    <div class="w-full max-w-md space-y-8">
      <div class="text-center">
        <h2 class="mt-6 text-3xl font-bold tracking-tight text-black dark:text-white">
          Verification Code
        </h2>
        <p class="mt-2 text-sm text-gray-600 dark:text-gray-400">
          Please enter the 3-digit code you received
        </p>
      </div>

      <div
        v-bind="api.getRootProps()"
        class="flex justify-center gap-4 mt-8"
      >
        <input
          v-for="index in 3"
          :key="index"
          v-bind="api.getInputProps({ index: index - 1 })"
          class="w-16 h-16 text-center text-2xl font-semibold bg-white dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:border-black dark:focus:border-white focus:ring-2 focus:ring-black dark:focus:ring-white focus:outline-none"
        >
      </div>

      <div class="text-center mt-6">
        <button
          @click="api.clearValue"
          class="px-4 py-2 text-sm font-medium text-white bg-black hover:bg-gray-800 dark:bg-white dark:text-black dark:hover:bg-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black dark:focus:ring-white"
        >
          Clear
        </button>
      </div>
    </div>
  </div>
  <Toolbar>
    <StateVisualizer :state="state" />
    <template #controls>
      <Controls :control="controls" />
    </template>
  </Toolbar>
</template>
````

---

如需同步更多控件或交互（如 focus 按钮），可参考 Vue SFC 的写法继续扩展。其它 React/Solid/Svelte 文件无需变动，只需将 Vue SFC 作为统一实现即可。

---

_**User**_

是根据 vue 的也就是说vue才是标准

---

_**Assistant**_

好的，Vue 是标准。下面是如何将 React、Solid、Svelte 版本同步为 Vue 结构和交互的步骤：

1. 以 Vue 文件为标准，统一各端的结构和交互。
2. 保留 copy-text 输入框、标题、说明、3 个 OTP 输入框、Clear 和 Focus 按钮。
3. 保持 data-testid 属性和 class 名称一致。
4. 工具栏和状态可视化保持一致。

下面是各文件的修改建议：

---

### [otp-input.tsx](file:///Users/elonehoo/Developer/destyler-package/destyler/examples/react/src/pages/otp-input.tsx)

**同步结构和交互，添加 copy-text 输入框、Focus 按钮，统一 class 和 data-testid。**

````tsx
import * as otpInput from '@destyler/otp-input'
import { normalizeProps, useMachine } from '@destyler/react'
import { pinInputControls } from '@destyler/shared-private'
import { StateVisualizer, Toolbar, useControls } from '@destyler/shared-private/react'
import { useId, useMemo } from 'react'

export default function OtpInput() {
  const controls = useControls(pinInputControls)
  const [state, send] = useMachine(otpInput.machine({ id: useId() }), {
    context: controls.context,
  })
  const api = useMemo(() => otpInput.connect(state, send, normalizeProps), [state, send])

  return (
    <>
      {/* ...existing code... */}
      <input data-testid="copy-text" />
      <div className="otp-input-box">
        <div className="otp-input-content-box">
          <div>
            <h2>
              Verification Code
            </h2>
            <p>
              Please enter the 3-digit code you received
            </p>
          </div>
          <div
            {...api.getRootProps()}
            className="otp-input-root"
          >
            {[0, 1, 2].map(index => (
              <input
                key={index}
                data-testid={`input-${index + 1}`}
                {...api.getInputProps({ index })}
                className="otp-input-item-input"
              />
            ))}
          </div>
          <div>
            <button
              data-testid="clear"
              onClick={api.clearValue}
            >
              Clear
            </button>
            <button
              data-testid="focus"
              onClick={api.focus}
            >
              Focus
            </button>
          </div>
        </div>
      </div>
      <Toolbar controls={controls.ui()}>
        <StateVisualizer state={state} />
      </Toolbar>
      {/* ...existing code... */}
    </>
  )
}
````

---

### [otp-input.tsx](file:///Users/elonehoo/Developer/destyler-package/destyler/examples/solid/src/pages/otp-input.tsx)

**同步结构和交互，添加 copy-text 输入框、Focus 按钮，统一 class 和 data-testid。**

````tsx
````tsx
````tsx
````tsx
````tsx
````tsx
````tsx
````tsx
/** @jsxImportSource solid-js */
import * as otpInput from '@destyler/otp-input'
import { pinInputControls } from '@destyler/shared-private'
import { StateVisualizer, Toolbar, useControls } from '@destyler/shared-private/solid'
import { normalizeProps, useMachine } from '@destyler/solid'
import { createMemo, createUniqueId } from 'solid-js'

export default function OtpInput() {
  const controls = useControls(pinInputControls)
  const uniqueId = createUniqueId()
  const [state, send] = useMachine(otpInput.machine({ id: uniqueId }), {
    context: controls.context,
  })
  const api = createMemo(() => otpInput.connect(state, send, normalizeProps))

  return (
    <>
      {/* ...existing code... */}
      <input data-testid="copy-text" />
      <div class="otp-input-box">
        <div class="otp-input-content-box">
          <div>
            <h2>
              Verification Code
            </h2>
            <p>
              Please enter the 3-digit code you received
            </p>
          </div>
          <div
            {...api().getRootProps()}
            class="otp-input-root"
          >
            {Array.from({ length: 3 }, (_, index) => (
              <input
                data-testid={`input-${index + 1}`}
                {...api().getInputProps({ index })}
                class="otp-input-item-input"
              />
            ))}
          </div>
          <div>
            <button
              data-testid="clear"
              onClick={() => api().clearValue()}
            >
              Clear
            </button>
            <button
              data-testid="focus"
              onClick={() => api().focus()}
            >
              Focus
            </button>
          </div>
        </div>
      </div>
      <Toolbar controls={controls.ui}>
        <StateVisualizer state={state} />
      </Toolbar>
      {/* ...existing code... */}
    </>
  )
}
````

---

### [otp-input.svelte](file:///Users/elonehoo/Developer/destyler-package/destyler/examples/svelte/src/pages/otp-input.svelte)

**同步结构和交互，添加 copy-text 输入框、Focus 按钮，统一 class 和 data-testid。**

````svelte
````svelte
````svelte
````svelte
````svelte
````svelte
````svelte
<script lang="ts">
  import * as otpInput from "@destyler/otp-input";
  import { normalizeProps, useMachine } from "@destyler/svelte";
  import { pinInputControls } from '@destyler/shared-private';
  import {useControls, Toolbar, StateVisualizer} from '@destyler/shared-private/svelte'
  import '@destyler/shared-private/styles/otp-input.css'

  const controls = useControls(pinInputControls);

  const id = $props.id();

  const [state, send] = useMachine(otpInput.machine({ id }), {
    context: controls.context,
  });

  const api = $derived(otpInput.connect(state, send, normalizeProps));
</script>

<!-- ...existing code... -->
<input data-testid="copy-text" />
<div class="otp-input-box">
  <div class="otp-input-content-box">
    <div>
      <h2>
        Verification Code
      </h2>
      <p>
        Please enter the 3-digit code you received
      </p>
    </div>
    <div
      {...api.getRootProps()}
      class="otp-input-root"
    >
      {#each Array(3) as _, index}
        <input
          data-testid={`input-${index + 1}`}
          {...api.getInputProps({ index })}
          class="otp-input-item-input"
        />
      {/each}
    </div>
    <div>
      <button
        data-testid="clear"
        on:click={api.clearValue()}
      >
        Clear
      </button>
      <button
        data-testid="focus"
        on:click={api.focus()}
      >
        Focus
      </button>
    </div>
  </div>
</div>
<Toolbar {controls}>
  <StateVisualizer state={state} />
</Toolbar>
<!-- ...existing code... -->
````

---

如需进一步同步样式或细节，请补充说明。

---

_**User**_

全部同步样式和细节

---

_**Assistant**_

好的，下面是根据 Vue 文件为标准，对 React、Solid、Svelte 版本进行样式和细节的完全同步，包括 class、data-testid、结构顺序、按钮样式等。

---

### [otp-input.tsx](file:///Users/elonehoo/Developer/destyler-package/destyler/examples/react/src/pages/otp-input.tsx)

**同步 class、结构顺序、data-testid、按钮样式，与 Vue 完全一致。**

````tsx
import * as otpInput from '@destyler/otp-input'
import { normalizeProps, useMachine } from '@destyler/react'
import { pinInputControls } from '@destyler/shared-private'
import { StateVisualizer, Toolbar, useControls } from '@destyler/shared-private/react'
import { useId, useMemo } from 'react'

export default function OtpInput() {
  const controls = useControls(pinInputControls)
  const [state, send] = useMachine(otpInput.machine({ id: useId() }), {
    context: controls.context,
  })
  const api = useMemo(() => otpInput.connect(state, send, normalizeProps), [state, send])

  return (
    <>
      <input data-testid="copy-text" />
      <div className="otp-input-box">
        <div className="otp-input-content-box">
          <div>
            <h2>
              Verification Code
            </h2>
            <p>
              Please enter the 3-digit code you received
            </p>
          </div>
          <div
            {...api.getRootProps()}
            className="otp-input-root"
          >
            {[1, 2, 3].map(index => (
              <input
                key={index}
                data-testid={`input-${index}`}
                {...api.getInputProps({ index: index - 1 })}
                className="otp-input-item-input"
              />
            ))}
          </div>
          <div>
            <button
              data-testid="clear"
              onClick={api.clearValue}
            >
              Clear
            </button>
            <button
              data-testid="focus"
              onClick={api.focus}
            >
              Focus
            </button>
          </div>
        </div>
      </div>
      <Toolbar controls={controls.ui()}>
        <StateVisualizer state={state} />
      </Toolbar>
    </>
  )
}
````

---

### [otp-input.tsx](file:///Users/elonehoo/Developer/destyler-package/destyler/examples/solid/src/pages/otp-input.tsx)

**同步 class、结构顺序、data-testid、按钮样式，与 Vue 完全一致。**

````tsx
/** @jsxImportSource solid-js */
import * as otpInput from '@destyler/otp-input'
import { pinInputControls } from '@destyler/shared-private'
import { StateVisualizer, Toolbar, useControls } from '@destyler/shared-private/solid'
import { normalizeProps, useMachine } from '@destyler/solid'
import { createMemo, createUniqueId } from 'solid-js'

export default function OtpInput() {
  const controls = useControls(pinInputControls)
  const uniqueId = createUniqueId()
  const [state, send] = useMachine(otpInput.machine({ id: uniqueId }), {
    context: controls.context,
  })
  const api = createMemo(() => otpInput.connect(state, send, normalizeProps))

  return (
    <>
      <input data-testid="copy-text" />
      <div class="otp-input-box">
        <div class="otp-input-content-box">
          <div>
            <h2>
              Verification Code
            </h2>
            <p>
              Please enter the 3-digit code you received
            </p>
          </div>
          <div
            {...api().getRootProps()}
            class="otp-input-root"
          >
            {[1, 2, 3].map(index => (
              <input
                data-testid={`input-${index}`}
                {...api().getInputProps({ index: index - 1 })}
                class="otp-input-item-input"
              />
            ))}
          </div>
          <div>
            <button
              data-testid="clear"
              onClick={() => api().clearValue()}
            >
              Clear
            </button>
            <button
              data-testid="focus"
              onClick={() => api().focus()}
            >
              Focus
            </button>
          </div>
        </div>
      </div>
      <Toolbar controls={controls.ui}>
        <StateVisualizer state={state} />
      </Toolbar>
    </>
  )
}
````

---

### [otp-input.svelte](file:///Users/elonehoo/Developer/destyler-package/destyler/examples/svelte/src/pages/otp-input.svelte)

**同步 class、结构顺序、data-testid、按钮样式，与 Vue 完全一致。**

````svelte
````svelte
````svelte
````svelte
````svelte
````svelte
````svelte
````svelte
````svelte
````svelte
````svelte
<script lang="ts">
  import * as otpInput from "@destyler/otp-input";
  import { normalizeProps, useMachine } from "@destyler/svelte";
  import { pinInputControls } from '@destyler/shared-private';
  import {useControls, Toolbar, StateVisualizer} from '@destyler/shared-private/svelte'
  import '@destyler/shared-private/styles/otp-input.css'

  const controls = useControls(pinInputControls);

  const id = $props.id();

  const [state, send] = useMachine(otpInput.machine({ id }), {
    context: controls.context,
  });

  const api = $derived(otpInput.connect(state, send, normalizeProps));
</script>

<input data-testid="copy-text" />
<div class="otp-input-box">
  <div class="otp-input-content-box">
    <div>
      <h2>
        Verification Code
      </h2>
      <p>
        Please enter the 3-digit code you received
      </p>
    </div>
    <div
      {...api.getRootProps()}
      class="otp-input-root"
    >
      {#each [1,2,3] as index}
        <input
          data-testid={`input-${index}`}
          {...api.getInputProps({ index: index - 1 })}
          class="otp-input-item-input"
        />
      {/each}
    </div>
    <div>
      <button
        data-testid="clear"
        on:click={api.clearValue()}
      >
        Clear
      </button>
      <button
        data-testid="focus"
        on:click={api.focus()}
      >
        Focus
      </button>
    </div>
  </div>
</div>
<Toolbar {controls}>
  <StateVisualizer state={state} />
</Toolbar>
````

---

如需同步更多细节（如 slot、控件栏等），请补充说明。

---

