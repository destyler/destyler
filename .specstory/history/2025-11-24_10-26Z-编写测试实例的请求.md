<!-- Generated by SpecStory, Markdown v2.1.0 -->

<!-- vscode Session 05b44340-d7b7-451d-8936-de77e1fe142b (2025-11-24 10:26Z) -->

# 编写测试实例的请求 (2025-11-24 10:26Z)

_**User (2025-11-24 10:43Z)**_

你可以帮我给 packages/frameworks 这些依赖编写完善的测试实例吗

---

_**Agent (model copilot/gpt-5.1-codex)**_

**Assessing packages/frameworks contents****Identifying missing frameworks directory****Planning test inspection tasks****Inspecting frameworks packages structure****Exploring test locations****Searching for test locations****Planning to add tests for frameworks****Planning tests for framework wrappers****Checking for subdirectories****Checking for portal details****Planning test coverage****Inspecting files to identify tests****Considering tests for instance consistency****Checking use-snapshot utility****Analyzing complex hook and tests****Reviewing use-service details****Considering effect hooks usage****Noticing `use-update-effect` reference****Planning tests and inspecting utils****Searching for createNormalizer definition and tests****Planning tests for framework dependencies****Reviewing normalizeProps usage across frameworks****Planning component tests****Considering vanilla normalizer****Inspecting toStyleString function****Planning test verification****Checking Vue version and test needs****Planning test coverage for frameworks packages****Inspecting controllers list****Planning tests for framework packages****Checking Vitest configuration****Inspecting vitest.browser.config and utils****Identifying missing config file****Planning test strategy for framework packages**

I'm sorting out how to structure tests across framework packages, considering `.test.ts` for Node pure functions and `.spec.tsx` for DOM-dependent hooks using `happy-dom`. Since many imports are type-only, I’ll verify runtime compatibility and plan test coverage mainly for core utilities like `normalizeProps`. I’m also looking into other packages like `solid` to understand their logic and dependencies better.**Listing hooks****Inspecting use-service functionality****Verifying snapshot usage****Evaluating testing approach for framework dependencies**

I'm thinking about how best to test packages/frameworks dependencies, especially considering Solid's reactive environment needs. Since hooking relies on `solid-js` internals and might require complex setups, focusing on core utilities like `normalizeProps` across frameworks seems practical. I'll also look at existing tests to align with the current style and figure out coverage scope.**Checking for existing tests****Verifying existing test coverage****Planning tests for framework packages****Planning comprehensive normalizeProps tests across frameworks**

I'm outlining detailed test cases for `normalizeProps` in each framework package—React, Solid, Svelte, Vue, Lit, and Vanilla—to cover critical behaviors like style conversion, event mapping, and attribute normalization. I’ll organize test files per framework, ensure coverage is thorough yet scoped, and track progress on reviewing, designing, and implementing these tests. This will help meet the user's request for comprehensive dependency verification across packages.**Designing comprehensive normalizeProps tests**

I’m mapping out a detailed strategy to implement tests for `normalizeProps` across multiple frameworks like React, Solid, Svelte, Vue, Lit, and Vanilla. I’m considering how to cover behaviors like style normalization, event mapping, and property transformation, while planning test file structure and imports carefully before starting on the actual test implementations.**Drafting tests for normalizeProps****Drafting tests for normalizeProps utility****Preparing Vue props normalization tests****Authoring lit normalizeProps tests****Adding more test cases**
```

```
**Verifying test and task statuses****Preparing to run targeted tests****Analyzing missing test command output****Planning to re-run tests****Troubleshooting Vitest multi-project filters**

I'm figuring out why filtering test files with `pnpm vitest run` isn't working as expected in a multi-project setup. The issue might be related to how paths and quotes are handled, project naming, or how the filter patterns apply across projects. I’m considering running tests per file or passing multiple explicit file paths without quotes to ensure they get picked up correctly.**Adjusting test for disabled prop behavior**
```

```
**Rerunning tests****Updating TODO status****Checking for changed files****Noticing auto-generated .specstory file****Summarizing test coverage and notes**

I'll highlight the detailed normalizeProps test suites added for each framework with file paths, include the command to run all these tests, and note the presence of a new `.specstory` file outside this work to keep the user informed.**Framework Coverage**  
- `normalize-props.test.ts` now locks down style stringification, boolean attribute coercion, and conversion of events/children into Lit-friendly props.  
- `normalize-props.test.ts` verifies the React normalizer’s identity semantics so intrinsic props, styles, and data attributes stay untouched.  
- `normalize-props.test.ts` exercises style hyphenation, event remapping, textContent handling, and omission of redundant `readOnly` flags.  
- `normalize-props.test.ts` covers prop casing/preserved keys, style serialization, default form prop translation, and how false booleans collapse to `undefined`.  
- `normalize-props.test.ts` asserts children → `textContent`, attribute aliasing (`htmlFor`, focus events), and Vue-style event casing plus default value rewrites.  
- `normalize-props.test.ts` gained checks for CSS serialization and alias mapping in addition to the existing uncontrolled-input safeguards.

**Tests**  
- `pnpm vitest run `normalize-props.test.ts` `normalize-props.test.ts` `normalize-props.test.ts` `normalize-props.test.ts` `normalize-props.test.ts` packages/frameworks/vanilla/src/normalize-props.test.ts`

Let me know if you’d like similar coverage for the portal directives/controllers next.

---

_**User (2025-11-24 10:46Z)**_

将测试文件都放到对应目录下的 test 目录,如果没有这个 test 则新建一个

---

_**Agent (model copilot/gpt-5.1-codex)**_



---

